<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Backtest Results</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #2c3e50; color: #ecf0f1; }
        .container { max-width: 1200px; margin-top: 50px; }
        .card { background-color: #34495e; border: none; margin-bottom: 30px;}
        .metric-value { font-size: 1.5rem; color: #3498db; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card p-4 text-center">
            <h1>Backtest Results for Pair: {{ pair }}</h1>
        </div>

        <div class="card p-4">
            <h2>Pair Statistics</h2>
            <div class="row">
                <div class="col-md-3"><strong>Correlation:</strong> <span class="metric-value">{{ "%.3f"|format(best_pair_stats.correlation) }}</span></div>
                <div class="col-md-3"><strong>Coint P-Value:</strong> <span class="metric-value">{{ "%.4f"|format(best_pair_stats.pvalue) }}</span></div>
                <div class="col-md-3"><strong>Half-Life:</strong> <span class="metric-value">{{ "%.1f"|format(best_pair_stats.half_life) }} days</span></div>
                <div class="col-md-3"><strong>Hedge Ratio:</strong> <span class="metric-value">{{ "%.3f"|format(best_pair_stats.hedge_ratio) }}</span></div>
            </div>
        </div>

        <div class="card p-4">
            <h2>Performance Metrics</h2>
            <div class="row">
                <div class="col-md-3"><strong>Total Return:</strong> <span class="metric-value">{{ "%.2%"|format(metrics.total_return) }}</span></div>
                <div class="col-md-3"><strong>Sharpe Ratio:</strong> <span class="metric-value">{{ "%.2f"|format(metrics.sharpe_ratio) }}</span></div>
                <div class="col-md-3"><strong>Max Drawdown:</strong> <span class="metric-value">{{ "%.2%"|format(metrics.max_drawdown) }}</span></div>
                <div class="col-md-3"><strong>Win Rate:</strong> <span class="metric-value">{{ "%.1%"|format(metrics.win_rate) }}</span></div>
            </div>
        </div>

        <div class="card p-4">
            <h2>Performance Dashboard</h2>
            <img src="{{ url_for('static', filename='plots/' + plot_image) }}" class="img-fluid" alt="Performance Plot">
        </div>

        <div class="text-center">
            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg">Run Another Test</a>
        </div>
    </div>
</body>
</html>