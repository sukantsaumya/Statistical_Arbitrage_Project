{% extends "base.html" %}
{% block title %}New Backtest{% endblock %}

{% block content %}
<div class="card">
    <h2>Run a New Backtest</h2>
    <form action="{{ url_for('run_backtest') }}" method="post">
        <div class="form-group">
            <label for="universe" class="form-label">Stock Ticker Universe</label>
            <textarea class="form-control" id="universe" name="universe" rows="3" placeholder="e.g., GLD, GDX, KO, PEP">{{ config.data.universe | join(', ') }}</textarea>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <div class="form-group">
                <label for="entry_z" class="form-label">Entry Z-Score</label>
                <input type="number" step="0.1" class="form-control" id="entry_z" name="entry_z" value="{{ config.strategy.entry_z_threshold }}">
            </div>
            <div class="form-group">
                <label for="exit_z" class="form-label">Exit Z-Score</label>
                <input type="number" step="0.1" class="form-control" id="exit_z" name="exit_z" value="{{ config.strategy.exit_z_threshold }}">
            </div>
            <div class="form-group">
                <label for="stop_loss_z" class="form-label">Stop Loss Z-Score</label>
                <input type="number" step="0.1" class="form-control" id="stop_loss_z" name="stop_loss_z" value="{{ config.strategy.stop_loss_z_threshold }}">
            </div>
        </div>

        <button type="submit" class="btn-primary">Run Backtest</button>
    </form>
</div>

<div class="card">
    <h2>Pair Selection Helper</h2>
    <div class="help-grid">
        <div class="help-card">
            <h4>üìà Classic Competitors</h4>
            <p>Look for companies in the same industry with similar business models. They are often affected by the same market forces. (e.g., KO & PEP, HD & LOW).</p>
        </div>
        <div class="help-card">
            <h4>üîó Supply Chain Links</h4>
            <p>Consider companies where one's product is a major input for another. For example, a commodity producer and a manufacturer. (e.g., GLD & GDX).</p>
        </div>
        <div class="help-card">
            <h4>üè¶ Sector ETFs</h4>
            <p>Try pairing a broad market index ETF (like SPY) with a specific sector ETF (like XLF for financials). Their relationship can be mean-reverting.</p>
        </div>
        <div class="help-card">
            <h4>‚ö†Ô∏è Avoid Volatile Stocks</h4>
            <p>High-growth tech or biotech stocks are often driven by news and hype, not stable economic links. They are poor candidates for this strategy.</p>
        </div>
    </div>
</div>
{% endblock %}